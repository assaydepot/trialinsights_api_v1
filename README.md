# LifeScience.io API

## Analysis and Applications for Content at [ClinicalTrials.gov](http://clinicaltrials.gov)
Application developers can use the API for programmatic access to all clinical trial data. The API provides for a __Data Access API__ and an __Aggregate Analysis API__ for clinical trial analytics. Clinical trial "facets" and trial "documents" represent the data and a data "cards" interface provides accees to analytics. Both aggregate analytics and trial content fetches are supported by a very powerful query object format, allowing for sensitive and precise control over the documents analyzed or returned from any request.

### Authentication
Access to lifescience.io is relies on Basic authentication credentials in the header of the request. [Contact Us](mailto:ron@inciteadvisors.com) to request your credentials. 

## Data Access API
The Data Access consists of _facets_ and trial _documents_. Facets are used to populate menus and picklists throughout a client application. Facet _keys_ are the available fields in the CT.gov archive, for example "lead_sponsor" or "condition". Facet _values_ are the intance value for a given key, such as "Pfizer" or "heart disease" in our example.

Certain facets such as "Facility" and "Investigators" have a large number of unique values, thus the the picklists can get quite large. The API provides a summary and a detail endpoint for retrieving facet names and the number of values for each.

All endpoints are available at https://lifescience.io/api/v1

### GET	/facets
Returns an overview of available facet “keys”.
```
// Example response
{ acronym: 88537,
  agency_class: 8,
  authority: 22833,
  biospec_retention: 3,
  category: 27,
  collaborator: 26980,
  'completion_date:type': 2,
  condition: 59164,
  condition_browse: 3691,
  contact: 145915,
  download_date: 44,
  duration: 47850,
  eligibility: 277,
  'eligibility:gender': 3,
  enrollment: 153262,
  'enrollment:type': 2,
  facility: 365534,
  has_expanded_access: 4,
  intervention_browse: 2994,
  'intervention:name': 180563,
  'intervention:other_name': 46146,
  'intervention:type': 9,
  investigator: 107743,
  is_fda_regulated: 4,
  keyword: 163149,
  lead_sponsor: 21118,
  location_countries: 192,
  mesh: 1,
  nct_id: 450685,
  overall_status: 13,
  phase: 8,
  PMID: 289162,
  'primary_completion_date:type': 2,
  study_design: 54,
  study_type: 5,
  verification_date: 499 }
```
### GET /facets/:facet
Returns Picklist of available facet “values” for requested :facet
```
// Example query /facets/phase
{ phase: 
   [ 'n/a',
     'phase 0',
     'phase 1',
     'phase 1/phase 2',
     'phase 2',
     'phase 2/phase 3',
     'phase 3',
     'phase 4' ] }
```

### POST /trials
Returns an array of trial IDs meeting search criteria. The query object allows specification of an array of objects. If more than 1 property is provided within the object, then ALL of the key/values of that object have to be met for the document to be selected. If multiple array elements are provided to find or filter, then ANY object where ALL key/values are a match will result in that document being "found" or "filtered". 
```
// Example Query object
{
  find:[{condition_browse:"breast neoplasms"},{condition_browse:"carcinoma, ductal, breast"}],
  filter:[{phase: "phase 2"},{phase:"phase 3"}],
  date_range:{from: "2010/1/1", to: "2015/12/31"}],
  location: {city: "Boston", state: "MA", country: "united states", radius: "100 miles"}
}
// This query will find all trial documents matching either find criteria. It will the remove docs that fall outside the specified
//date_range and docs whose trials are neither "phase 2" or "phase 3". The resulting documents will be ordered according to their
// proximity to Boston, MA.
```
The /trials endpoint also includes important information in the response header, including cache "ID" and page Info properties.

#### Cache ID "x-lifescience-cache-id"
The cache ID is a unique id generated by the server to identify the posted query for subsequent requests. A client can use the cache ID as an index for subsequent requests to avoid additional round-trips to the server.

#### Page Information "x-lifescience-page-info"
The page info header includes values or page, pageSize, and total trial documents connected to the query.

### POST /trials?page={page}
Returns an array of requested trial documents.

Post a query object (specified above) to the /trials enpoint to fetch trial documents.

Clients implement "page next" and "page previous" functionality by providing the page number (zero based) in the query string. The request header "x-lifescience-page-info" provides an object with the _page_, _pageSize_ and _total_ number of documents in the collection. For now, the _pageSize_ is fixed at 100. 

Clients can limit the requested field with the "$project" property. 
```
// Example POST object for requesting trial documents.
{
   keys:["nct001234","nct005678"],
   $project: ["nct_id", "condition", "intervention:name", "start_date","lead_sponsor", "eligibility"]
}
```
### GET /trials/:trial
Return the trial document as a JSON object

#

## Aggregate Analysis API
The aggregate analysis API works similar to the data access API interm of query format and logic. However, in lieu of trial lists and documents, the endpoints calculate aggregate values for trial documents containing 

### POST /cards/<facet key>
Returns an aggregate analysis of facet value counts found in trial documents resulting from posted search criteria. Please refer to the /trials endpoint for the post body specification.

If you omit the facet_key specification, the endpoint will return an object with keys for ALL facet keys. To limit the results provide the facet_key as part of the URL.

An example result object is show below:
```
// Example result object from a cards query.
// /cards/overall_status
{ overall_status: 
      { completed: 107,
        'not yet recruiting': 8,
        'enrolling by invitation': 2,
        'active, not recruiting': 9,
        recruiting: 17,
        terminated: 3,
        withdrawn: 3 } }
```
#
LifeScience.io and Trialio.com are trademarks of Incite Advisors, Inc.
